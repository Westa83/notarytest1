---
import "../styles/global.css";
---

<html lang="pl">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Kancelaria notarialna</title>
	</head>
	<body>
		<header class="site-header">
			<nav class="top-nav" aria-label="Nawigacja główna">
				<strong class="brand">Kancelaria notarialna</strong>
				<div class="menu-links">
					<a class="menu-link" href="#o-nas">O nas</a>
					<a class="menu-link" href="#uslugi">Usługi</a>
					<a class="menu-link" href="#kontakt">Kontakt</a>
				</div>
				<a class="cta-button" href="#kontakt">Umów wizytę</a>
			</nav>
		</header>

		<main class="main-content">
			<section id="o-nas" class="section">
				<h2>O nas</h2>
				<p>
					Świadczymy czynności notarialne z dbałością o bezpieczeństwo prawne,
					poufność oraz przejrzystą komunikację na każdym etapie współpracy.
				</p>
			</section>

			<section id="uslugi" class="section">
				<h2>Usługi</h2>
				<p>
					Przygotowujemy akty notarialne, poświadczenia i pełnomocnictwa dla osób
					prywatnych oraz firm, zgodnie z najwyższymi standardami jakości.
				</p>
			</section>

			<section id="kontakt" class="section">
				<h2>Kontakt</h2>
				<p>
					Skontaktuj się z nami telefonicznie lub mailowo, aby umówić termin
					spotkania dopasowany do Twoich potrzeb.
				</p>
			</section>
		</main>

		<script is:inline>
			const sectionLinks = Array.from(document.querySelectorAll(".menu-link"));
			const sections = Array.from(document.querySelectorAll("main section[id]"));

			const setActiveLink = (id) => {
				sectionLinks.forEach((link) => {
					const isActive = link.getAttribute("href") === `#${id}`;
					link.classList.toggle("active", isActive);
				});
			};

			const observer = new IntersectionObserver(
				(entries) => {
					const visibleEntry = entries
						.filter((entry) => entry.isIntersecting)
						.sort((a, b) => b.intersectionRatio - a.intersectionRatio)[0];

					if (visibleEntry) {
						setActiveLink(visibleEntry.target.id);
					}
				},
				{
					threshold: [0.45, 0.6, 0.75],
					rootMargin: "-80px 0px -45% 0px",
				}
			);

			sections.forEach((section) => observer.observe(section));
			if (sections[0]) setActiveLink(sections[0].id);
		</script>
	</body>
</html>
